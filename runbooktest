#Azure Subscription
$subscriptionID = "c9d29852-24f1-4a56-8e8a-f33ff7649858"

#VM Tags
$vmStatus = "VM running"
$tagValue1 = "Dev"
$tagValue2 = "Arya Bera"
$tagValue3 = "Shared"

Set-AzContext -Subscription $subscriptionID

#Get all Azure VMs which are in stopped state and have the specific tags

$mySelectedVMs = Get-AzVM -status | Where-Object {$_.PowerState -eq $vmStatus -and (($_.Tags.Values -eq $tagValue1 -and $_.Tags.Values -eq $tagValue2))}



for ($i = 0; $i -lt $mySelectedVMs.Length; $i++) {

    $resourceGroupName = $mySelectedVMs[$i].ResourceGroupName
    $vmName = $mySelectedVMs[$i].Name

    Start-AzVM -ResourceGroupName $resourceGroupName -Name $vmName
}
